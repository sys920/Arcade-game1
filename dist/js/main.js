!function(){var e={},t=[];function n(n){if(e[n])return e[n];var o=new Image;o.onload=function(){e[n]=o,i()&&t.forEach(function(e){e()})},e[n]=!1,o.src=n}function i(){var t=!0;for(var n in e)e.hasOwnProperty(n)&&!e[n]&&(t=!1);return t}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){n(e)}):n(e)},get:function(t){return e[t]},onReady:function(e){t.push(e)},isReady:i}}();let level=1,highestLevel=0,increaseSpeed=1;var Enemy=function(e,t,n){this.sprite="images/enemy-bug.png",this.x=e,this.y=t,this.speed=n};function checkCollisions(e,t){if(Math.abs(e-player.x)<60&&Math.abs(t-player.y)<40){level>=highestLevel?(highestLevel=level,swal("Sorry! But, you got highest level today!")):swal("Sorry! You've hit the bug, try again "),player.x=200,player.y=400,level=1,increaseSpeed=1;for(let e in allEnemies)allEnemies[e].speed=Math.floor(3*Math.random())+2}}Enemy.prototype.update=function(e){},Enemy.prototype.render=function(){this.x<505||(this.x=-20),this.x=this.x+this.speed,ctx.drawImage(Resources.get(this.sprite),this.x,this.y),checkCollisions(this.x,this.y)};var Player=function(e,t){this.x=e,this.y=t,this.sprite="images/char-boy.png"};Player.prototype.update=function(e){},Player.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},Player.prototype.handleInput=function(e){if("left"===e&&this.x>0?(this.x=this.x-100,collisitonWithStone=checkblock(this.x,this.y),!0===collisitonWithStone&&(this.x=this.x+100)):"right"===e&&this.x<400?(this.x=this.x+100,collisitonWithStone=checkblock(this.x,this.y),!0===collisitonWithStone&&(this.x=this.x-100)):"up"===e&&this.y>0?(this.y=this.y-82,collisitonWithStone=checkblock(this.x,this.y),!0===collisitonWithStone&&(this.y=this.y+82)):"down"===e&&this.y<400&&(this.y=this.y+82,collisitonWithStone=checkblock(this.x,this.y),!0===collisitonWithStone&&(this.y=this.y-82)),-10===this.y){player.x=200,player.y=400,level++,increaseSpeed++,swal(`Good job! You are level ${level}`);for(let e in allEnemies)allEnemies[e].speed=allEnemies[e].speed+Math.floor(Math.random()*increaseSpeed);stone.x=100*Math.floor(5*Math.random()),stone.y=100*Math.floor(3*Math.random())+40,levelElement.textContent=`Level :  ${level}`}};let allEnemies=[new Enemy(-10,65,4),new Enemy(-40,150,2),new Enemy(0,230,5)],player=new Player(200,400);document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var Stone=function(){this.sprite="images/Rock.png",this.x=100*Math.floor(5*Math.random()),this.y=100*Math.floor(3*Math.random())+40};Stone.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y),ctx.font="25px Arial",ctx.fillStyle="white",ctx.fillText(`HIGHEST LEVEL! : ${highestLevel} `,10,80),ctx.fillText(`LEVEL : ${level} `,10,110)};let stone=new Stone;function checkblock(e,t){return Math.abs(stone.x-e)<71&&Math.abs(stone.y-t)<40?result=!0:result=!1,result}var Engine=function(e){var t,n=e.document,i=e.window,o=n.createElement("canvas"),s=o.getContext("2d");function a(){var e=Date.now();!function(e){!function(e){allEnemies.forEach(function(t){t.update(e)}),player.update()}(e)}((e-t)/1e3),function(){var e,t,n=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"];for(s.clearRect(0,0,o.width,o.height),e=0;e<6;e++)for(t=0;t<5;t++)s.drawImage(Resources.get(n[e]),101*t,83*e);allEnemies.forEach(function(e){e.render()}),player.render(),stone.render()}(),t=e,i.requestAnimationFrame(a)}o.width=505,o.height=606,n.body.appendChild(o),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/char-boy.png","images/Rock.png"]),Resources.onReady(function(){t=Date.now(),a()}),e.ctx=s}(this);